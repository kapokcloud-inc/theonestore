{% extends '/default/mobile/layout/base.html.j2' %} 

{% block head %}
<title>{{_('提交订单 - 一店')}}</title>
<link rel="stylesheet" href="/static/default/mobile/css/user.css"> 
{% endblock %} 

{% block body %}
<div class="user_wrap">
  <div class="choiceAddress">
    <a class="weui-cell weui-cell_access bg-white" href="javascript:;" onclick="choiceAdd()">
      <div class="weui-cell__hd mar-right">
        <img src="/static/default/mobile/img/address.png" alt="" style="width:20px">
      </div>
      <div class="weui-cell__bd">
        <div class="blackGap">
          <span>收件人：</span>
          <span>大头</span>
          <span class="mar-left">13510515229</span>
        </div>
        <div class="address" style="color:#666 !important">
          <span>收货地址：</span>
          <span>深圳市 龙华新区 民治大道 深圳市龙华新区民治大道深圳市龙华新区民治大道</span>
        </div>
      </div>
      <div class="weui-cell__ft mar-left"></div>
    </a>
    <a class="weui-cell weui-cell_access bg-white" href="javascript:;" onclick="newAddress()">
      <div class="weui-cell__hd mar-right">
        <img src="/static/default/mobile/img/add.png" alt="" style="width:20px">
      </div>
      <div class="weui-cell__bd blackGap">新建地址</div>
      <div class="weui-cell__ft mar-left"></div>
    </a>
    <div class="hide ranpo" id="addressList">
      <div class="hide-mask"></div>
      <div class="weui-actionsheet weui-actionsheet_toggle">
        <div class="weui-actionsheet__menu">
          <input type="hidden" name="" id="" value="">
          <div class="weui-actionsheet__cell not-product_text">
            <span>新建收货地址</span>
            <img src="/static/default/mobile/img/cancel.png" alt="" class="cancal_image" id="choiceCancel">
          </div>
          <div class="weui-cell addressitem">
            <div class="weui-cell__hd mar-right">
              <img src="/static/default/mobile/img/address.png" alt="" style="width:20px">
            </div>
            <div class="weui-cell__bd">
              <span class="all_title">大头</span>
              <span class="mar-left">13510515229</span>
              <div class="address">
                <span class="add_tag">[默认]</span>
                <span class="add_tag">[家]</span>
                <span>深圳市 龙华新区 民治大道 深圳市龙华新区民治大道深圳市龙华新区民治大道</span>
              </div>
            </div>
            <div class="weui-cell__ft mar-left width46">
              <span class="edit" onClick="newAddress()">编辑</span>
            </div>
          </div>
          <div class="weui-cell addressitem">
            <div class="weui-cell__hd mar-right">
              <img src="/static/default/mobile/img/address.png" alt="" style="width:20px">
            </div>
            <div class="weui-cell__bd">
              <span class="all_title">大头</span>
              <span class="mar-left">13510515229</span>
              <div class="address">
                <span class="add_tag"></span>
                <span class="add_tag"></span>
                <span>深圳市 龙华新区 民治大道 深圳市龙华新区民治大道深圳市龙华新区民治大道</span>
              </div>
            </div>
            <div class="weui-cell__ft mar-left width46">
              <span class="edit" onClick="newAddress()">编辑</span>
            </div>
          </div>
          <a class="weui-cell weui-cell_access bg-white" href="javascript:;" onclick="newAddress()">
            <div class="weui-cell__hd mar-right">
              <img src="/static/default/mobile/img/add.png" alt="" style="width:20px">
            </div>
            <div class="weui-cell__bd blackGap">新建地址</div>
            <div class="weui-cell__ft mar-left"></div>
          </a>
        </div>
      </div>
    </div>
    <div class="hide ranpo" id="newAdd">
      <div class="hide-mask"></div>
      <div class="weui-actionsheet weui-actionsheet_toggle">
        <div class="weui-actionsheet__menu">
          <input type="hidden" name="" id="" value="">
          <div class="weui-actionsheet__cell not-product_text">
            <span>新建收货地址</span>
            <img src="/static/default/mobile/img/cancel.png" alt="" class="cancal_image" onclick="cancel()">
          </div>
          <div class="weui-cell">
            <div class="weui-cell__bd">
              <input class="weui-input greykGap" type="text" placeholder="请填写收件人姓名" value="">
            </div>
          </div>
          <div class="weui-cell">
            <div class="weui-cell__bd">
              <input class="weui-input greykGap" type="text" placeholder="请填写收件人手机号码" value="">
            </div>
          </div>
          <div class="weui-cell weui-cell_select weui-cell_select-after">
            <div class="weui-cell__bd">
              <input class="weui-input greykGap" type="text" placeholder="请选择收件地区" value="" id='city-picker'>
            </div>
          </div>
          <div class="weui-cell">
            <div class="weui-cell__bd">
              <input class="weui-input greykGap" type="text" placeholder="请填写详细地址：如街道、道路、门牌号等" value="">
            </div>
          </div>
          <div class="weui-cell">
            <div class="weui-cell__bd">
              <input class="weui-input greykGap" type="text" placeholder="请填写邮政编码" value="">
            </div>
          </div>
          <div class="weui-cell">
            <button type="button" class="weui-btn weui-btn_red" onClick="save()">保存</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="weui-cells weui-cells_form">
    <div class="weui-cell">
      <div class="weui-cell__bd">
        <a href="{{ url_for('mobile.index.root') }}" class="all_title">一店</a>
      </div>
    </div>
    <div class="weui-cell not_before">
      <div class="weui-cell__hd avatar mar-right">
        <img src="" alt="">
      </div>
      <div class="weui-cell__bd">
        <div class="all_title height25">小米蓝牙项圈耳机 黑色</div>
        <div class="all_desc height25">红米Note 5 全网通版 4GB内存 64GB</div>
      </div>
      <div class="weui-cell__ft mar-left">
        <span class="all_price height25">1599元</span>
        <p class="height25">x 1</p>
      </div>
    </div>
    <div class="weui-cell">
      <div class="weui-cell__hd avatar mar-right">
        <img src="" alt="">
      </div>
      <div class="weui-cell__bd">
        <div class="all_title height25">红米Note 5 全网通版 4核 4GB内存 64GB</div>
        <div class="all_desc height25">小米蓝牙项圈耳机 黑色</div>
      </div>
      <div class="weui-cell__ft mar-left">
        <span class="all_price height25">1599元</span>
        <p class="height25">x 1</p>
      </div>
    </div>
    <a class="weui-cell weui-cell_access bg-white" href="javascript:;">
      <div class="weui-cell__bd blackGap">配送方式</div>
      <div class="weui-cell__ft mar-left">
        <input type="text" class="weui-input align_right" id="express_type" value="快递 免邮" data-values="快递 免邮">
      </div>
    </a>
  </div>
  <div class="weui-cells weui-cells_form">
    <a class="weui-cell weui-cell_access"  href="javascript:;" onclick="choiceCoupon()">
      <div class="weui-cell__bd blackGap">优惠券码</div>
      <div class="weui-cell__ft">使用优惠</div>
    </a>
    <div class="hide ranpo" id="couponList">
      <div class="hide-mask"></div>
      <div class="weui-actionsheet weui-actionsheet_toggle">
        <div class="weui-actionsheet__menu">
          <input type="hidden" name="" id="" value="">
          <div class="weui-actionsheet__cell not-product_text bg-white">
            <span>选择优惠券</span>
            <img src="/static/default/mobile/img/cancel.png" alt="" class="cancal_image" onclick="closeCoupon()">
          </div>
          <div class="coupon_list">
            <div class="bg-white coupon_item weui-cell">
              <div class="off_money weui-cell__hd">
                <div class="wave"></div>
                <span class="symbol">￥</span>
                <span class="money_num">10</span>
                <p class="money_text">满￥200.0减</p>
              </div>
              <div class="coupon_right weui-cell__bd">
                <div class="all_title height25">全品类(特例商品除外)</div>
                <div class="all_desc height20">2018.06.01~2018.06.10</div>
                <div class="mminentExpiry height25">即将过期</div>
              </div>
            </div>
          </div>
          <div class="coupon_list">
            <div class="bg-white coupon_item weui-cell">
              <div class="off_money weui-cell__hd">
                <div class="wave"></div>
                <span class="symbol">￥</span>
                <span class="money_num">20</span>
                <p class="money_text">满￥200.0减</p>
              </div>
              <div class="coupon_right weui-cell__bd">
                <div class="all_title height25">全品类(特例商品除外)</div>
                <div class="all_desc height20">2018.06.01~2018.06.18</div>
                <div class="mminentExpiry height25"></div>
              </div>
            </div>
          </div>
          <div class="coupon_list">
            <div class="bg-white coupon_item weui-cell">
              <div class="off_money weui-cell__hd">
                <div class="wave"></div>
                <span class="symbol">￥</span>
                <span class="money_num">10</span>
                <p class="money_text">满￥200.0减</p>
              </div>
              <div class="coupon_right weui-cell__bd">
                <div class="all_title height25">全品类(特例商品除外)</div>
                <div class="all_desc height20">2018.06.01~2018.06.18</div>
                <div class="mminentExpiry height25"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="weui-cells weui-cells_form">
    <div class="weui-form-preview">
      <div class="weui-form-preview__bd">
        <div class="weui-form-preview__item">
          <label class="weui-form-preview__label blackGap">商品总价</label>
          <span class="weui-form-preview__value">￥1299.00</span>
        </div>
        <div class="weui-form-preview__item">
          <label class="weui-form-preview__label blackGap">运费</label>
          <span class="weui-form-preview__value">+￥12.00</span>
        </div>
        <div class="weui-form-preview__item">
          <label class="weui-form-preview__label blackGap">优惠金额</label>
          <span class="weui-form-preview__value">-￥0.00</span>
        </div>
      </div>
    </div>
  </div>
  <div style="height:56px;"></div>
  <div class="submit_order">
    <div class="flex_wrap order_bar">
      <div class="total">
        <div class="total-price">
          <span>支付金额：</span>
          <span class="all_price">￥1299.00</span>
        </div>
        <div class="btn_primary" onclick="submit()">提交订单</div>
      </div>
    </div>
    <div class="hide ranpo" id="payList">
      <div class="hide-mask"></div>
      <div class="weui-actionsheet weui-actionsheet_toggle">
        <div class="weui-actionsheet__menu">
          <input type="hidden" name="" id="" value="">
          <div class="weui-actionsheet__cell not-product_text bg-white">
            <span>选择支付方式</span>
            <img src="/static/default/mobile/img/cancel.png" alt="" class="cancal_image" onclick="closePay()">
          </div>
          <div class="weui-cells weui-cells_form weui-cells_radio" style="margin-top:0px !important">
            <label class="weui-cell weui-check__label">
              <div class="weui-cell__hd mar-right">
                <img class="cancal_image" src="/static/default/mobile/img/balancePay.png" alt="">
              </div>
              <div class="weui-cell__bd blackGap">
                余额支付
                <span id="" name="" class="funds mar-left" data-value="">
                  可用余额：199.00元
                </span>
              </div>
              <div class="weui-cell__ft">
                <input class="weui-check" type="radio" name="pay_type" value="wallet">
                <span class="weui-icon-checked"></span>
              </div>
            </label>
            <label class="weui-cell weui-check__label">
              <div class="weui-cell__hd mar-right">
                <img class="cancal_image" src="/static/default/mobile/img/weixin.png" alt="">
              </div>
              <div class="weui-cell__bd blackGap">微信支付</div>
              <div class="weui-cell__ft">
                <input class="weui-check" type="radio" name="pay_type" value="weixin" checked="">
                <span class="weui-icon-checked"></span>
              </div>
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} 

{% block script %}
<script src="https://cdn.bootcss.com/jquery-weui/1.2.0/js/city-picker.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/default/mobile/js/jquery.ui.widget.js" type="text/javascript"></script>
<script src="/static/default/mobile/js/jquery.fileupload.js" type="text/javascript"></script>

<script type="text/javascript">

var $addressList = $('#addressList');
var $newAdd = $('#newAdd');
var $couponList = $('#couponList');
var $payList = $('#payList');

$(document).ready(function () {
  $("#city-picker").cityPicker({
    title: "请选择所在地"
  });

  $("#express_type").select({
    title: "选择配送方式",
    items: ["快递 免邮", "普通快递 运费8元", "顺丰次日达 15元"]
  });
});

//选择收货地址
function choiceAdd(){
  // 显示选择地址弹窗
  if ($addressList.hasClass('hide')) {
    $addressList.removeClass('hide').addClass('show');

    // 隐藏选择地址弹窗
  } else {
    $addressList.removeClass('show').addClass('hide');
  }
}

//选中地址
$('.addressitem').click(function (event) {        //event:事件对象
  event.stopPropagation();                        //停止事件冒泡
  $addressList.removeClass('show');
  if (!$addressList.hasClass('hide')) {
    $addressList.addClass('hide');
  }
});

//取消选择地址弹窗
$('#choiceCancel').click(function (event) {            //event:事件对象
  event.stopPropagation();                        //停止事件冒泡

  $addressList.removeClass('show');
  if (!$addressList.hasClass('hide')) {
    $addressList.addClass('hide');
  }
});

//新建收货地址
function newAddress() {
  // 显示新建地址弹窗
  if ($newAdd.hasClass('hide')) {
    $newAdd.removeClass('hide').addClass('show');

    // 隐藏新建地址弹窗
  } else {
    $newAdd.removeClass('show').addClass('hide');
  }
}

//取消新建或编辑收货地址
function cancel() {
  $.confirm({
    text: '确定要放弃此次编辑么？',
    onOK: function () {
      $newAdd.removeClass('show');
      if (!$newAdd.hasClass('hide')) {
        $newAdd.addClass('hide');
      }
    },
    onCancel: function () {}
  });
}

//点击保存，关闭新建或编辑收货地址弹窗
function save() {
  $newAdd.removeClass('show');
  if (!$newAdd.hasClass('hide')) {
    $newAdd.addClass('hide');
  }
}

//选择优惠券
function choiceCoupon() {
  // 显示优惠券弹窗
  if ($couponList.hasClass('hide')) {
    $couponList.removeClass('hide').addClass('show');

    // 隐藏优惠券弹窗
  } else {
    $couponList.removeClass('show').addClass('hide');
  }
}

//选中优惠券
$('.coupon_list').click(function (event) {        //event:事件对象
  event.stopPropagation();                        //停止事件冒泡
  $couponList.removeClass('show');
  if (!$couponList.hasClass('hide')) {
    $couponList.addClass('hide');
  }
});

//关闭优惠券弹窗
function closeCoupon(){
  $couponList.removeClass('show');
  if (!$couponList.hasClass('hide')) {
    $couponList.addClass('hide');
  }
}

//选择支付方式
function submit() {
  // 显示选择地址弹窗
  if ($payList.hasClass('hide')) {
    $payList.removeClass('hide').addClass('show');

    // 隐藏选择地址弹窗
  } else {
    $payList.removeClass('show').addClass('hide');
  }
}

//关闭支付方式弹窗
function closePay() {
  $payList.removeClass('show');
  if (!$payList.hasClass('hide')) {
    $payList.addClass('hide');
  }
}

//选中支付方式
$('.weui-check__label').click(function (event) {        //event:事件对象
  event.stopPropagation();                        //停止事件冒泡
  $payList.removeClass('show');
  if (!$payList.hasClass('hide')) {
    $payList.addClass('hide');
  }
});
</script> 
{% endblock %}